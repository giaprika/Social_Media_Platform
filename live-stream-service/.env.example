# ===========================================
# Live Service Configuration
# ===========================================

# Environment: development | staging | production
ENV=development

# ===========================================
# Server Configuration
# ===========================================
SERVER_PORT=8080
SERVER_HOST=localhost
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s

# ===========================================
# Database Configuration (PostgreSQL)
# ===========================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password_here
DB_NAME=live_service
DB_SSLMODE=disable

# Connection Pool Settings (optimized for 50+ concurrent streams)
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=30m
DB_CONN_MAX_IDLE_TIME=5m

# ===========================================
# SRS Media Server Configuration
# ===========================================
SRS_SERVER_URL=http://localhost:8080
SRS_SERVER_IP=localhost
SRS_RTMP_PORT=1935
SRS_HTTP_PORT=8080
SRS_WEBRTC_PORT=1985
SRS_API_PORT=1985
SRS_CALLBACK_URL=http://localhost:8080/api/v1/callbacks

# ===========================================
# WebRTC Configuration (CRITICAL for browser streaming)
# ===========================================
# CANDIDATE IP: Your server's PUBLIC IP address
# This IP is sent to WebRTC clients in SDP for ICE connectivity
# 
# Development (local): 127.0.0.1
# Production (GCP): Your Compute Engine external IP (e.g., 34.123.45.67)
# 
# How to get your public IP on GCP:
#   curl -H "Metadata-Flavor: Google" http://metadata.google.internal/computeMetadata/v1/instance/network-interfaces/0/access-configs/0/external-ip
# 
# ⚠️ WARNING: If this is wrong, WebRTC will fail to connect!
SRS_PUBLIC_IP=127.0.0.1

# ===========================================
# HLS & SRS Configuration
# ===========================================
# SRS config file path
# Development: ./configs/srs.conf (5s fragments, safe for testing)
# Production: ./configs/srs.production.conf (2s fragments, low latency)
SRS_CONFIG_PATH=./configs/srs.conf

# HLS output directory
# Development: ./data/hls (local folder)
# Production: /mnt/live_data (gcsfuse mounted GCS bucket)
HLS_DATA_PATH=./data/hls

# ===========================================
# Google Cloud Storage Configuration
# ===========================================
GCS_BUCKET_NAME=social-app-live-hls-staging
GCS_PROJECT_ID=your-project-id
GCS_MOUNT_PATH=/mnt/live_data

# ===========================================
# CDN Configuration
# ===========================================
CDN_DOMAIN=cdn.example.com
CDN_BASE_URL=https://cdn.example.com

# ===========================================
# Caddy SSL/TLS Configuration
# ===========================================
# Domain cho API (phải trỏ DNS về server IP)
API_DOMAIN=api.yourdomain.com
# Email cho Let's Encrypt notifications
ACME_EMAIL=admin@yourdomain.com

# ===========================================
# TURN Server Configuration (Coturn)
# ===========================================
# Required for NAT traversal (4G/5G, corporate wifi)
TURN_REALM=extase.dev
# Shared secret for dynamic credentials (RFC 5766)
# Generate: openssl rand -hex 32
TURN_SECRET=your-turn-secret-here-generate-with-openssl
# CRITICAL: Must be your server's PUBLIC IP
TURN_EXTERNAL_IP=127.0.0.1
# Credential TTL - default 24 hours (use Go duration format: 24h, 86400s, etc.)
TURN_CREDENTIAL_TTL=24h

# ===========================================
# Authentication Configuration
# ===========================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_TOKEN_EXPIRY=24h
JWT_REFRESH_EXPIRY=168h

# ===========================================
# Budget Alert Configuration (GCP)
# ===========================================
BUDGET_ALERT_ENABLED=false
BUDGET_MONTHLY_LIMIT=100.00
BUDGET_ALERT_THRESHOLD=0.8
BUDGET_ALERT_EMAIL=admin@example.com
